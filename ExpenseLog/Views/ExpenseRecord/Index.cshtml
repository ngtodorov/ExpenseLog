
@model IEnumerable<ExpenseLog.Models.ExpenseRecord>
@{
    ViewBag.Title = "Index";
}

<h2>Expense Records</h2>

<hr />
@using (Html.BeginForm())
{
    <div class="form-group">
        <div class="form-row">
            <div class="col input-group-sm">
                @Html.DropDownList("expenseTypeID", (ViewBag.ExpenseTypes as IEnumerable<SelectListItem>), htmlAttributes: new { @class = "form-control", @tag = "index" })
            </div>
            <div class="col input-group-sm">
                @Html.DropDownList("expenseEntityID", (ViewBag.ExpenseEntities as IEnumerable<SelectListItem>), htmlAttributes: new { @class = "form-control" })
            </div>
            <div class="col input-group-sm">
                <input name="fromDateFilter" class="form-control text-box single-line valid" id="fromDateFilter" data-date-format="mm/dd/yyyy" aria-invalid="false" aria-describedby="ExpenseDate-error" type="datetime" value="@ViewBag.FilterDateFrom" data-provide="datepicker" data-val="true" data-val-date="The field Date must be a date.">
            </div>
            <div class="col input-group-sm">
                <input name="toDateFilter" class="form-control text-box single-line valid" id="toDateFilter" data-date-format="mm/dd/yyyy" aria-invalid="false" aria-describedby="ExpenseDate-error" type="datetime" value="@ViewBag.FilterDateTo" data-provide="datepicker" data-val="true" data-val-date="The field Date must be a date.">
            </div>
            <div class="col">
                <input class="btn btn-outline-primary btn-sm" type="submit" value="View" />
                @Html.ActionLink("Excel", "ExportToExcel", "ExpenseRecord", null, new { @class = "btn btn-outline-primary btn-sm" })
            </div>
        </div>

    </div>
}


<table class="table table-striped table-bordered table-hover table-sm order-column" id="table1" name="table1" style="width:100%">
    <tr>
        <th style="width:10px">
            @Html.ActionLink("+", "Create", "ExpenseRecord", null, new { @class = "btn btn-outline-primary btn-sm", title = "New Record" })
        </th>
        <th>
            @Html.ActionLink("Name", "Index", new { sortOrder = ViewBag.NameSortParam })
        </th>
        <th>
            @Html.ActionLink("Date", "Index", new { sortOrder = ViewBag.DateSortParam })
        </th>
        <th>
            @Html.ActionLink("Price", "Index", new { sortOrder = ViewBag.PriceSortParam })
        </th>
        <th>
            @Html.ActionLink("Description", "Index", new { sortOrder = ViewBag.DescrSortParam })
        </th>
        <th>
            @Html.DisplayName("Att")
        </th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                <!-- Edit Button -->
                @Html.ActionLink("[]", "Edit", "ExpenseRecord", new { id = item.ExpenseRecordID }, new { @class = "btn btn-outline-primary btn-sm", title = "Edit Record" })

            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ExpenseEntity.ExpenseEntityName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ExpenseDate)
            </td>
            <td class="dt-body-right">
                @Html.DisplayFor(modelItem => item.ExpensePrice)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ExpenseDescription)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ExpenseAttachments.Count)
            </td>

        </tr>
    }

    <tr>
        <td colspan="2"></td>

        <td>
            <b>$@ViewBag.Total</b>
        </td>

        <td colspan="3"></td>

    </tr>

</table>



@section Scripts {

    @Scripts.Render("~/Scripts/custom/customscripts.js")


}